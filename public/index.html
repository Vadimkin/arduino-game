<!doctype html>
<html>
	<head>
		<title>Hello world</title>
		<meta name="viewport" content="width=device-width, minimal-ui" />
	</head>
	<body>

	<style>
		.info {
			/*transition: all 0.01s ease, background-position 1ms;*/
			width: 100%;
			height: 1px;
			background: #000;
			position: absolute;
			top: 100%;
			left: 0;
		}
	</style>
		
		
	<script src="/jquery-1.11.0.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>

	<div class="info"></div>
	
	<h1>ALL OK</h1>

	<script>
	var socket = io.connect();

	var maxValue = -1;
	var minValue = -1;

	$(document).ready(function() {
		socket.on('analogValue', (function(data) {
			if(maxValue < data) {
				maxValue = data;
			}
			if((minValue == -1 || minValue > data) && data != 0) {
				minValue = data;
			}

			var marTop = (100 * (data - minValue))/(maxValue - minValue);

			$('.info').css({'top': marTop + '%'});

			$('h1').html(marTop);
		}));

		socket.on('disconnect', function() {
			maxValue = -1;
			minValue = -1;
        });
	});

	</script>
	</body>
</html>
